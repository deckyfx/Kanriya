@page "/"
@layout EmptyLayout
@inject WebConsole.Services.BlazorLocalizationService L
@inject NavigationManager NavigationManager

<div style="padding: 2rem;">
    <h1>@L.T("app.welcome")</h1>
    <p>@L.T("platform.info", L.CurrentLanguage)</p>
    
    <div style="margin: 2rem 0;">
        <h3>Common Actions:</h3>
        <button>@L.T("app.login")</button>
        <button>@L.T("app.settings")</button>
        <button>@L.T("app.help")</button>
        <button>@L.T("app.about")</button>
    </div>
    
    <div style="margin: 2rem 0;">
        <h3>Language Selector:</h3>
        <select @onchange="OnLanguageChange" style="padding: 0.5rem; font-size: 1rem;">
            <option value="en" selected="@(L.CurrentLanguage == "en")">English</option>
            <option value="id" selected="@(L.CurrentLanguage == "id")">Bahasa Indonesia</option>
            <option value="ja" selected="@(L.CurrentLanguage == "ja")">日本語</option>
            <option value="zh" selected="@(L.CurrentLanguage == "zh")">中文</option>
            <option value="zh-CN" selected="@(L.CurrentLanguage == "zh-CN")">简体中文</option>
        </select>
    </div>
    
    <div style="margin: 2rem 0; padding: 1rem; background: #f5f5f5; border-radius: 4px;">
        <h4>Debug Info:</h4>
        <p>Current Language: <strong>@L.CurrentLanguage</strong></p>
        <p>Available: @string.Join(", ", L.SupportedLanguages)</p>
        <p>Share this page in Japanese: <br/>
           <code>@L.GetShareableUrl("ja")</code>
        </p>
    </div>
</div>

@code {
    protected override void OnInitialized()
    {
        L.Initialize();
    }
    
    void OnLanguageChange(ChangeEventArgs e)
    {
        var newLang = e.Value?.ToString() ?? "en";
        // Simply reload the page with the language query parameter
        NavigationManager.NavigateTo($"?lang={newLang}", forceLoad: true);
    }
}